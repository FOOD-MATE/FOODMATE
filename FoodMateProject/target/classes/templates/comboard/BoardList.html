<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="assets/css/main.css">
<link rel="stylesheet" href="css/board.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link href="https://hangeul.pstatic.net/hangeul_static/css/nanum-barun-gothic.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
<script type="text/javascript">
	function go_view(seq) {
		var theForm = document.createElement('form');
		theForm.method = "get";
		theForm.action = "/com_board_detail";

		var hiddenSeq = document.createElement('input');
		hiddenSeq.type = "hidden";
		hiddenSeq.name = "seq";
		hiddenSeq.value = seq;

		theForm.appendChild(hiddenSeq);
		document.body.appendChild(theForm);
		theForm.submit();
	}

	function keyClick(event) {
		var category = event.target.getAttribute('data-category');
		var url = '/category';
		if (category === 'cnt_sort' || category === 'goodpoint_sort'
				|| category === 'date_sort') {
			url = '/sorted_board_list';
			url += '?sort=' + category;
		} else {
			url += '?category=' + encodeURIComponent(category);
		}
		window.location.href = url;
	}
	
	function submitSearch() {
	    document.getElementById('searchForm').submit();
	}
</script>
</head>
<body>
	<article>
		<section id="banner" data-video="images/banner">
			<div class="inner">
				<header>
					<h1 style="color:#fff ">User Recipes</h1>
					<p>
						본인만의 레시피를 다른 사람들과 함께 공유 해 보세요<br> <a
							href="https://templated.co/">인기 있는 레시피</a>를 지금 확인 해 보세요!
					</p>
				</header>
			</div>
		</section>
		<div id="main">
		<div class="thumbnails">
		<div class="box">
		<h3>검색</h3>
		<form id="searchForm" name="searchForm" th:action="@{/board_search}" method="get">
			<select name="searchType" id="searchType">
				<option value="title">제목</option>
				<option value="id">ID</option>
			</select> <input type="text" name="searchKeyword" id="searchKeyword">  
			<a href="#" onclick="submitSearch()"><span class="material-symbols-outlined">search</span></a>
		</form>
		</div>
		<br>
			<div class="box">
				<h3>카테고리로 보기</h3>
				<a href="#" data-category="반찬" onclick="keyClick(event)"
					th:text="'반찬'"></a> <a href="#" data-category="국&찌개"
					onclick="keyClick(event)" th:text="'국&찌개'"></a> <a href="#"
					data-category="후식" onclick="keyClick(event)" th:text="'후식'"></a> <a
					href="#" data-category="일품" onclick="keyClick(event)"
					th:text="'일품'"></a> <br>
			</div>
			<div class="box">
				<h3>인기순 보기</h3>
				<a href="#" data-category="cnt_sort" onclick="keyClick(event)"
					th:text="'조회수순'"></a> <a href="#" data-category="goodpoint_sort"
					onclick="keyClick(event)" th:text="'추천수순'"></a> <a href="#"
					data-category="date_sort" onclick="keyClick(event)" th:text="'최신순'"></a>
			</div>
			<form id="writeForm" method="get" action="/board_write">
				<button type="submit" class="btn">글쓰기</button>
			</form>
		</div>
		<hr>
		<div class="thumbnails" >
			<form name="frm" method="get" style="width: 100%; margin-left:10%;">
				<th:block th:each="com_boardVO : ${boardList}">
					<div class="box" style="width: 25%;">
						<a href="javascript:void(0);" th:onclick="'go_view(' + ${com_boardVO.seq} + ');'">
							<img th:src="@{${com_boardVO.com_recipe.att_file_no_mk}}" style="width: 100%; height: 180px;" /></a>
						<div class="inner">
							<h3>[[${com_boardVO.com_recipe.rcp_nm}]]</h3>
							<p>작성자 : [[${com_boardVO.member_data.id}]]</p>
							<p>조회수 : [[${com_boardVO.cnt}]]</p>
							<p>추천수 : [[${com_boardVO.goodpoint}]]</p>
							<br>
							<a href="javascript:void(0);" class="button style2 fit" data-poptrox="youtube,800x400" th:onclick="'go_view(' + ${com_boardVO.seq} + ');'">보러가기</a>
						</div>
					</div>
				</th:block>
			</form>
		</div>
		<th:block th:insert="~{./page_area}"></th:block>
		</div>
	</article>
</body>
</html>